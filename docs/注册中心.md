### Install consul

使用consul作为配置中心和服务注册中心。
```shell
sudo mkdir -p /etc/consul.d /data/consul
sudo chmod 777 /data/consul /etc/consul.d
if [ ! "$(docker ps -q -f name=consul)" ]; then
    if [ "$(docker ps -aq -f status=exited -f name=consul)" ]; then
        docker rm consul
    fi
    docker run --name=consul -d -p 8500:8500 \
    -v /etc/consul.d/:/etc/consul.d/ \
    -v /data/consul:/data/consul consul:1.8.5 \
    agent -server -ui -config-dir /etc/consul.d/ -data-dir=/data/consul -log-file=/data/consul/log
fi
```

添加配置
```shell
curl 'http://127.0.0.1:8500/v1/kv/micro/config/comm?dc=dc&flags=0' \
-X 'PUT' \
-H 'Connection: keep-alive' \
-H 'Content-Type: application/json; charset=UTF-8' \
-H 'Accept: */*' \
-H 'Origin: http://127.0.0.1:8500' \
-H 'Accept-Language: zh-CN,zh;q=0.9,en;q=0.8,zh-TW;q=0.7' \
-H 'Cookie: io=r1hlEUjS4Ox4XtGTAACZ' \
-H 'token: DTFDUAGFPTWWXQOIDQSMUA' \
--data-raw $'{\n    "jwt_white_list": ["/helloworld/handler11"],\n    "jwt_secret": "7y3h237ye2o38sdasd9asduahsda8sdaushd9-a9s9idasdhd",\n    "registry_address":"172.30.13.77:8500",\n    "broker":"nats",\n    "broker_address":"172.30.12.14:4222",\n    "opentracing_address":"127.0.0.1:6831",\n  \u0009"redis_address":"127.0.0.1:6379",\n    "redis_passwd":"gmt692#112"\n}' \
--compressed

curl 'http://127.0.0.1:8500/v1/kv/micro/config/srv/helloworld?dc=dc&flags=0' \
-X 'PUT' \
-H 'Connection: keep-alive' \
-H 'Content-Type: application/json; charset=UTF-8' \
-H 'Accept: */*' \
-H 'Origin: http://127.0.0.1:8500' \
-H 'Accept-Language: zh-CN,zh;q=0.9,en;q=0.8,zh-TW;q=0.7' \
-H 'Cookie: io=r1hlEUjS4Ox4XtGTAACZ' \
-H 'token: DTFDUAGFPTWWXQOIDQSMUA' \
--data-raw $'{\n"data_source": "root:111111@/dolphin_localhost?charset=utf8&parseTime=True&loc=Local&"\n}' \
--compressed
```